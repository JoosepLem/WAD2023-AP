(function(){"use strict";var t={8105:function(t,o,e){var n=e(9242),s=e(3396);function a(t,o,e,n,a,r){const i=(0,s.up)("Header"),l=(0,s.up)("router-view"),d=(0,s.up)("Footer");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(i),(0,s.Wm)(l),(0,s.Wm)(d)],64)}const r=t=>((0,s.dD)("data-v-023c39b8"),t=t(),(0,s.Cn)(),t),i={class:"header-wrapper"},l={class:"menu"},d=r((()=>(0,s._)("li",null," | ",-1)));function c(t,o,e,n,a,r){const c=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("header",null,[(0,s._)("div",i,[(0,s._)("ul",l,[(0,s._)("li",null,[(0,s.Wm)(c,{to:"/"},{default:(0,s.w5)((()=>[(0,s.Uk)("Home")])),_:1})]),d,(0,s._)("li",null,[(0,s.Wm)(c,{to:"/contacts"},{default:(0,s.w5)((()=>[(0,s.Uk)("Contacts")])),_:1})])])])])}var u={data(){return{isDropdownVisible:!1,dropDownMenuId:"dropDownMenu",profileIconId:"profileIcon"}},mounted(){document.addEventListener("click",this.closeDropdownOnClickOutside)},methods:{toggleDropdown(){this.isDropdownVisible=!this.isDropdownVisible},closeDropdownOnClickOutside(t){!this.isDropdownVisible||document.getElementById(this.profileIconId).contains(t.target)||document.getElementById(this.dropDownMenuId).contains(t.target)||(this.isDropdownVisible=!1)}}},p=e(89);const h=(0,p.Z)(u,[["render",c],["__scopeId","data-v-023c39b8"]]);var m=h;const g=t=>((0,s.dD)("data-v-28945d49"),t=t(),(0,s.Cn)(),t),f=g((()=>(0,s._)("div",{class:"footer-wrapper"},[(0,s._)("span",null,"WAD 2023"),(0,s._)("span",null,"All rights reserved."),(0,s._)("ul",{class:"footer-list"},[(0,s._)("li",null,"Joosep Lember"),(0,s._)("li",null,"Nikita Filin"),(0,s._)("li",null,"Johann Mattias Tamm")])],-1))),v=[f];function w(t,o){return(0,s.wg)(),(0,s.iD)("footer",null,v)}const _={},b=(0,p.Z)(_,[["render",w],["__scopeId","data-v-28945d49"]]);var y=b,D={components:{Header:m,Footer:y}};const P=(0,p.Z)(D,[["render",a]]);var k=P,C=e(2483);const O={class:"wrapper"},j={class:"post-buttons"};function A(t,o,e,n,a,r){const i=(0,s.up)("Post");return(0,s.wg)(),(0,s.iD)("div",O,[(0,s._)("button",{onClick:o[0]||(o[0]=(...t)=>r.Logout&&r.Logout(...t)),class:"logout"},"Logout"),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.getPosts,(t=>((0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(i,{post:t},null,8,["post"])])))),256)),(0,s._)("div",j,[(0,s._)("button",{class:"post-btn",onClick:o[1]||(o[1]=(...t)=>r.openAddPost&&r.openAddPost(...t))},"Add post"),(0,s._)("button",{class:"post-btn",onClick:o[2]||(o[2]=(...t)=>r.deleteAllPosts&&r.deleteAllPosts(...t))},"Delete all")])])}e(560);var I=e(7139);const L={class:"post"},S={class:"post-wrapper"},U={class:"post-data"},T={class:"creation-date"},E={class:"post-content"};function V(t,o,e,n,a,r){return(0,s.wg)(),(0,s.iD)("section",L,[(0,s._)("div",S,[(0,s._)("div",U,[(0,s._)("p",T,(0,I.zw)(a.date),1)]),(0,s._)("div",E,[(0,s._)("p",null,(0,I.zw)(e.post.body),1)])])])}var Z={data(){return{date:this.post.date}},props:{post:{type:Object,required:!0}}};const W=(0,p.Z)(Z,[["render",V],["__scopeId","data-v-760ecc40"]]);var $=W,J={components:{Post:$},methods:{Logout(){fetch("http://localhost:3000/auth/logout",{credentials:"include"}).then((t=>t.json())).then((t=>{console.log(t),console.log("jwt removed"),this.$router.push("/login")})).catch((t=>{console.log(t),console.log("error logout")}))},openAddPost(){this.$router.push("/add-post")},deleteAllPosts(){fetch("http://localhost:3000/posts/delete-all",{method:"DELETE",credentials:"include"}).then((t=>t.json())).then((t=>{console.log(t),this.$store.dispatch("getAllPostsAct")})).catch((t=>{console.error("Error deleting posts:",t)}))}},computed:{getPosts(){return this.$store.getters.getPosts}},mounted(){this.$store.dispatch("getAllPostsAct")}};const M=(0,p.Z)(J,[["render",A]]);var x=M;const H=t=>((0,s.dD)("data-v-4317ef7e"),t=t(),(0,s.Cn)(),t),q={class:"login-container"},F={class:"input-group"},N=H((()=>(0,s._)("label",{for:"email"},"Email",-1))),z={class:"input-group"},B=H((()=>(0,s._)("label",{for:"password"},"Password",-1))),Y={class:"buttons"};function K(t,o,e,a,r,i){return(0,s.wg)(),(0,s.iD)("section",null,[(0,s._)("div",q,[(0,s._)("div",F,[N,(0,s.wy)((0,s._)("input",{id:"email",type:"email",name:"email",required:"","onUpdate:modelValue":o[0]||(o[0]=t=>r.email=t)},null,512),[[n.nr,r.email]])]),(0,s._)("div",z,[B,(0,s.wy)((0,s._)("input",{id:"password",type:"password",name:"password",required:"","onUpdate:modelValue":o[1]||(o[1]=t=>r.password=t)},null,512),[[n.nr,r.password]])]),(0,s._)("div",Y,[(0,s._)("button",{class:"signup",onClick:o[2]||(o[2]=(...t)=>i.SignUp&&i.SignUp(...t))},"Sign up")])])])}var G={data(){return{email:"",password:""}},methods:{SignUp(){var t={email:this.email,password:this.password};fetch("http://localhost:3000/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((t=>t.json())).then((()=>{location.assign("/")})).catch((t=>{console.log(t)}))}}};const Q=(0,p.Z)(G,[["render",K],["__scopeId","data-v-4317ef7e"]]);var R=Q;const X=t=>((0,s.dD)("data-v-3149f4f2"),t=t(),(0,s.Cn)(),t),tt={class:"login-container"},ot={class:"input-group"},et=X((()=>(0,s._)("label",{for:"email"},"Email",-1))),nt={class:"input-group"},st=X((()=>(0,s._)("label",{for:"password"},"Password",-1))),at={class:"buttons"},rt=X((()=>(0,s._)("span",null,"or",-1)));function it(t,o,e,a,r,i){return(0,s.wg)(),(0,s.iD)("section",null,[(0,s._)("div",tt,[(0,s._)("div",ot,[et,(0,s.wy)((0,s._)("input",{id:"email",type:"email",name:"email",required:"","onUpdate:modelValue":o[0]||(o[0]=t=>r.email=t)},null,512),[[n.nr,r.email]])]),(0,s._)("div",nt,[st,(0,s.wy)((0,s._)("input",{id:"password",type:"password",name:"password",required:"","onUpdate:modelValue":o[1]||(o[1]=t=>r.password=t)},null,512),[[n.nr,r.password]])]),(0,s._)("div",at,[(0,s._)("button",{class:"login",onClick:o[2]||(o[2]=(...t)=>i.LogIn&&i.LogIn(...t))},"Log in"),rt,(0,s._)("button",{class:"signup",onClick:o[3]||(o[3]=t=>this.$router.push("/signup"))},"Sign up")])])])}var lt={data(){return{email:"",password:""}},methods:{LogIn(){var t={email:this.email,password:this.password};fetch("http://localhost:3000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((t=>t.json())).then((()=>{location.assign("/")})).catch((t=>{console.log("error")}))}}};const dt=(0,p.Z)(lt,[["render",it],["__scopeId","data-v-3149f4f2"]]);var ct=dt;const ut=t=>((0,s.dD)("data-v-c107750a"),t=t(),(0,s.Cn)(),t),pt={class:"add-post-container"},ht={class:"add-post-wrapper"},mt=ut((()=>(0,s._)("div",{class:"heading"},[(0,s._)("h1",null,"Add Post")],-1))),gt={class:"form"},ft=ut((()=>(0,s._)("label",{for:"post-body"},"Body:",-1))),vt={class:"button-wrapper"};function wt(t,o,e,a,r,i){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",pt,[(0,s._)("div",ht,[mt,(0,s._)("div",gt,[ft,(0,s.wy)((0,s._)("textarea",{id:"post-body",placeholder:"body","onUpdate:modelValue":o[0]||(o[0]=t=>r.body=t)},null,512),[[n.nr,r.body]])]),(0,s._)("div",vt,[(0,s.Wm)(l,{to:"/",class:"add-post-button",onClick:i.addPost},{default:(0,s.w5)((()=>[(0,s.Uk)("Add")])),_:1},8,["onClick"])])])])}var _t={data(){return{body:""}},methods:{addPost(){this.$store.dispatch("addPostAct",{data:this.body}),this.$router.push("/")}}};const bt=(0,p.Z)(_t,[["render",wt],["__scopeId","data-v-c107750a"]]);var yt=bt;const Dt=t=>((0,s.dD)("data-v-0e44101e"),t=t(),(0,s.Cn)(),t),Pt={class:"contacts-wrapper"},kt=Dt((()=>(0,s._)("h1",null,"Contacts Page",-1))),Ct=Dt((()=>(0,s._)("br",null,null,-1))),Ot=Dt((()=>(0,s._)("h2",null,"Our contact information:",-1))),jt={class:"contacts-list"};function At(t,o,e,n,a,r){return(0,s.wg)(),(0,s.iD)("div",Pt,[kt,Ct,Ot,(0,s._)("ul",jt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.contacts,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id,class:"contact-item"},[(0,s._)("strong",null,(0,I.zw)(t.name),1),(0,s.Uk)(": "+(0,I.zw)(t.email),1)])))),128))])])}var It={data(){return{contacts:[{id:1,name:"Nikita Filin",email:"nikitafilin@gmail.com"},{id:2,name:"Johann Mattias Tamm",email:"johannmattiastamm@gmail.com"},{id:3,name:"Joosep Lember",email:"lemberjoosep01@gmail.com"}]}}};const Lt=(0,p.Z)(It,[["render",At],["__scopeId","data-v-0e44101e"]]);var St=Lt,Ut={user:{authenticated:!1},authenticated:async function(){return await fetch("http://localhost:3000/auth/authenticate",{credentials:"include"}).then((t=>t.json())).then((t=>{this.user.authenticated=t.authenticated,console.log(t)})).catch((t=>{console.log(t),console.log("error logout")})),this.user.authenticated}};const Tt=[{path:"/",name:"home",component:x,beforeEnter:async(t,o,e)=>{let n=await Ut.authenticated();n?e():e("/login")}},{path:"/signup",name:"SignUp",component:R},{path:"/login",name:"LogIn",component:ct},{path:"/add-post",name:"AddPost",component:yt},{path:"/contacts",name:"ContactsPage",component:St}],Et=(0,C.p7)({history:(0,C.r5)(),routes:Tt});var Vt=Et,Zt=e(65);function Wt(t){const o={year:"numeric",month:"short",day:"numeric"};return new Date(t).toLocaleDateString("en-US",o)}var $t=(0,Zt.MT)({state:{posts:[]},getters:{getPosts:t=>t.posts},mutations:{setPosts(t,o){t.posts=o.map((t=>({id:t.id,body:t.body,date:Wt(t.date)})))},addPost(t,o){const e={body:o.body,date:Wt(o.date)};t.posts.push(e)}},actions:{addPostAct({commit:t},o){try{const e=fetch("http://localhost:3000/post/add-post",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(o)}),n=e.json();t("addPost",n)}catch(e){console.error(e)}},getAllPostsAct({commit:t}){try{fetch("http://localhost:3000/post/get-all").then((t=>t.json())).then((o=>t("setPosts",o)))}catch(o){console.error(o.message)}}},modules:{}});(0,n.ri)(k).use($t).use(Vt).mount("#app")}},o={};function e(n){var s=o[n];if(void 0!==s)return s.exports;var a=o[n]={exports:{}};return t[n].call(a.exports,a,a.exports,e),a.exports}e.m=t,function(){var t=[];e.O=function(o,n,s,a){if(!n){var r=1/0;for(c=0;c<t.length;c++){n=t[c][0],s=t[c][1],a=t[c][2];for(var i=!0,l=0;l<n.length;l++)(!1&a||r>=a)&&Object.keys(e.O).every((function(t){return e.O[t](n[l])}))?n.splice(l--,1):(i=!1,a<r&&(r=a));if(i){t.splice(c--,1);var d=s();void 0!==d&&(o=d)}}return o}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[n,s,a]}}(),function(){e.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(o,{a:o}),o}}(),function(){e.d=function(t,o){for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)}}(),function(){var t={143:0};e.O.j=function(o){return 0===t[o]};var o=function(o,n){var s,a,r=n[0],i=n[1],l=n[2],d=0;if(r.some((function(o){return 0!==t[o]}))){for(s in i)e.o(i,s)&&(e.m[s]=i[s]);if(l)var c=l(e)}for(o&&o(n);d<r.length;d++)a=r[d],e.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return e.O(c)},n=self["webpackChunkblog"]=self["webpackChunkblog"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=e.O(void 0,[998],(function(){return e(8105)}));n=e.O(n)})();
//# sourceMappingURL=app.2ec35f5a.js.map